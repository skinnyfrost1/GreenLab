<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:disabled="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

    <link th:href="@{/stylesheet/theme.css}" type="text/css" rel="stylesheet">
    <link th:href="@{/stylesheet/font.css}" type="text/css" rel="stylesheet">
    <link th:href="@{/stylesheet/dropdown_menu.css}" type="text/css" rel="stylesheet">
    <link th:href="@{/stylesheet/index.css}" type="text/css" rel="stylesheet">
    <link th:href="@{/stylesheet/profCreateCourse.css}" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css"
          integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <title>profEditCourse</title>
</head>
<body>
<!-- Header Banner -->
<table class="header webfont semibold">
    <tbody style="padding: 0; margin: 0;">
    <tr>
        <!-- Left Part -->
        <td>
            <table style="padding: 0; margin: 0;">
                <tr>
                    <td class="headerCellPadding">
                        <div class="logo"></div>
                    </td>
                    <td class="headerCellPadding">
                        <!--                        <a href="/index" class="headerSelected">Courses</a>-->
                        <div class="dropdown" style="cursor: pointer;">
                            <span style="color:#eeeeee">Courses</span>
                            <div class="dropdown_container" style="padding-top: 0.8em;">
                                <div class="dropdown-content"><a th:href="@{/courses}">View Courses</a></div>
                                <div class="dropdown-content"><a th:href="@{/course/create}">Create Course</a></div>
                            </div>
                        </div>
                    </td>
                    <td class="headerCellPadding">
                        <!-- <a href="discover" class="headerUnselected">Labs</a> -->
                        <div class="dropdown" style="cursor: pointer;">
                            <span style="color:#eeeeee">Labs</span>
                            <div class="dropdown_container" style="padding-top: 0.8em;">
                                <div class="dropdown-content"><a th:href="@{/labs}">View Labs</a></div>
                                <div class="dropdown-content"><a th:href="@{/lab/create}">Create Lab</a></div>
                            </div>
                        </div>
                    </td>
                    <td class="headerCellPadding">
                        <!-- <a href="search" class="headerUnselected">Equipments</a> -->
                        <div class="dropdown" style="cursor: pointer;">
                            <span style="color:#eeeeee">Equipments</span>
                            <div class="dropdown_container" style="padding-top: 0.8em;">
                                <div class="dropdown-content"><a th:href="@{/equipments}">View Equipment</a></div>
                                <div class="dropdown-content"><a th:href="@{/equipment/create}">Add Equipment</a></div>
                                <div class="dropdown-content"><a th:href="@{/equipment/search}">Search Equipment</a></div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </td>
        <!-- Right Part -->
        <td style="width: 5em;">
            <table style="padding: 0; margin: 0; align: right;">
                <tr style="align: right;">
                    <td class="headerCellPadding">
                        <a th:href="@{/logout}" class="headerUnselected"><i class='fas fa-sign-out-alt headerIcon'></i></a>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
    </tbody>
</table>
<!--  End of tool bar -->
<div style="padding: 4em;"></div>
<!-- Title -->
<div class="title webfont" th:text="${course.courseId}"></div>
<!-- Two containers -->
<form id="uploadRosterForm" action="" method = "post" enctype="multipart/form-data"></form>
<form th:action="@{/course/edit}" method = "post" enctype="multipart/form-data">
    <div id="editCourseInfoContainer" class="show" style="text-align: center;">
        <!-- Left container -->
        <div class="createCourseContainer webfont">
            <div class=" webfont bold" style="text-align:left; margin: 0.5em 0;" >Course Name</div>
<!--            <div id="" type="text" name="_id" th:value="${course._id}"   style="visibility: hidden;"></div><br>-->
            <input id="_id" type="text" name="_id" th:value="${course._id}" style="display: none;"><br>
            <input id="courseId" type="text" name="courseId" th:value="${course.courseId}" maxlength="24" class="createCourseTextfield webfont" required><br>
            <div class=" webfont bold" style="text-align:left; margin: 0.5em 0;">Title</div>
            <input id="courseName"type="text" name="courseName" th:value="${course.courseName}" maxlength="50" class="createCourseTextfield webfont" required><br>
            <div class=" webfont bold" style="text-align:left; margin: 0.5em 0;">Semester</div>
            <input id="semester"type="text" name="semester" th:value="${course.semester}" maxlength="24" class="createCourseTextfield webfont" required><br>
            <div class=" webfont bold" style="text-align:left; margin: 0.5em 0;">Description</div>
            <textarea id="courseDescription" type="text" name="courseDescription" th:text="${course.courseDescription}" maxlength="250" class="createCourseTextArea webfont" required></textarea><br>
<!--            <div>-->
<!--                <div class="webfont" style=" text-align: left; ">Student Roster-->
<!--                    <span>-->
<!--                    <a href="" style = "margin:0em 1em;"> UploadRoster </a>-->
<!--                    </span>-->
<!--                </div>-->
<!--            </div>-->

        </div>
        <!-- End of left Container -->

        <!-- Right container-->

        <!-- End of right container -->
    </div>
    <!-- End of two containers-->
    <div class="show" id="editCourseEditLabs" style="text-align: center;">
        <div class="createCourseContainer webfont">
            <div class=" webfont bold" style="text-align:left;margin: 0.5em 0;">Existed Labs
                <span>
                    <a href="" class="" style="margin:0em 1em 0em 20em;"></i></a>
                </span>
            </div>
            <!-- one lab -->
            <!-- loop -->
            <div th:each="lab: ${labs}"class="bigLabContainer">
                <div class="labExisted">
                    <a th:href="'/course/edit?id=' +${course.get_id()}"></a>
                    <table class="labContainer" >
                        <col width="30%"/>
                        <col width="40%"/>
                        <col width="30%"/>
                        <!-- <col width="20%"/> -->
                        <!-- <tbody style="padding: 0; margin: 0;"> -->
                        <tr>
                            <!--                        <td class="courseCellPadding">-->
                            <!--                            <div th:text="${course.courseId}"></div>-->
                            <!--                        </td>-->
                            <!--                        <td class="courseCellPadding">-->
                            <!--                            <div class="webfont" th:text="'[ ' + ${course.semester} + ' ]'"></div>-->
                            <!--                        </td>-->

                            <td class="courseCellPadding">
                                <div class="webfont" th:text="${lab.labName}"></div>
                            </td>
                            <td class="courseCellPadding">
    <!--                            <div class="checkBoxDiv">-->
                                    <input class="webfont" name="editLabSelected" type="checkbox" th:value="${lab._id}" checked></input>
    <!--                            </div>-->
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>


        <div class="createCourseContainer webfont">
            <input id='testEditHidden' type='hidden' value='default' name='editLabSelected'>
            <div class=" webfont bold" style="text-align:left;margin: 0.5em 0;">Labs To Add
                <span>
                    <a href="" class="" style="margin:0em 1em 0em 20em;"></i></a>
            </span>
            </div>
            <!-- one lab -->
            <!-- loop -->
            <div th:each="lab: ${restLabs}"class="bigLabContainer">
                <div class="labToAdd">
                    <a th:href="'/course/edit?id=' +${course.get_id()}"></a>
                    <table class="labContainer" >
                        <col width="30%"/>
                        <col width="40%"/>
                        <col width="30%"/>
                        <!-- <col width="20%"/> -->
                        <!-- <tbody style="padding: 0; margin: 0;"> -->
                        <tr>
                            <td class="courseCellPadding">
                                <div class="webfont" th:text="${lab.labName}"></div>
                            </td>
                            <td class="courseCellPadding">
                                <input class="webfont" name="editLabSelected" type="checkbox" th:value="${lab._id}"></input>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div style="text-align: center;margin:0em 0em 1em 0em" class="show" id="studentRosterContainer">
        <div class="bigContainer webfont" style="width:83.5%;margin:0em 0em 0em 6.5em;">
<!--            <div class=" webfont" style="text-align:left; margin: 0.5em 0.5em; " >Student roster</div>-->
<!--            <div>-->
<!--                <div class="webfont bold" style=" text-align: left; ">Student Roster-->
<!--                    <span>-->
<!--                    <a href="#displayStudent" style = "margin:0em 1em;" onclick="test()"> UploadRoster </a>-->
<!--                    </span>-->
<!--                </div>-->
<!--            </div>-->
            <div>
                    <span>
                    <div>
                        <label for="file" style="margin:0em 5em 0em 0em;font-weight: bold">Student Roster</label>
                        <input form="uploadRosterForm" type="file" id="file" name="file" value="" accept=".csv" onchange="uploadRoster2()">
                        <input form="uploadRosterForm" type="text" name="courseId" th:value="${course.getCourseId()}" hidden>
                        <a onclick=show('img1') > Click to see the roster format ( only .csv accepted ) </a>
                        <a ><img class="equipmentContainer" th:src="@{/image/RosterFormat.png}" style="position: fixed; text-align: center; width: 16em; height: 12em; top: 5em; z-index: 9999; display: none" id="img1"></a>
                        <script type="text/javascript">
                        function show(id)
                        {
                            var img = document.getElementById(id);
                            if(img.style.display == "block") {
                                document.getElementById(id).style.display = "none";
                            }
                            else if(document.getElementById(id).style.display == "none") {
                                document.getElementById(id).style.display = "block";
                            }
                        }
                        </script>
                    </div>
                        <!--            <a href="" style = "margin:0em 1em;"> UploadRoster </a>-->
                    </span>
            </div>

            <!-- loop -->
            <!-- one course -->
            <div id="displayStudent">
                <div th:each="student: ${students}" class="notVeryBigContainer" th:id="'div_' + ${student.getEmail()}" >
        <!--            <div th:if="${role=='professor'}"><a th:href="'/course/edit?id=' +${course.get_id()}">-->
                        <table class="courseContainer">
                            <col width="15%"/>
                            <col width="25%"/>
                            <col width="40%"/>
                            <col width="20%"/>
                            <!-- <col width="20%"/> -->
                            <!-- <tbody style="padding: 0; margin: 0;"> -->
                            <tr >
                                <td class="courseCellPadding">
                                    <div class="webfont" th:text="${student.getFirstname()}"></div>
                                    <input id="studentEmail" type="text" name="studentEmail" th:value="${student.getEmail()}"hidden>
                                </td>
                                <td class="courseCellPadding" th:text="${student.getLastname()}" />
                                <td class="courseCellPadding" th:text="${student.getUid()}" />
                                <td class="courseCellPadding">
    <!--                                <a th:href="@{/logout}" ><i class='fas fa-trash-alt'></i></a>-->
                                    <a th:id="${student.getEmail()}" class="headerUnselected" onclick="deleteStudent(this)"><i class='fas fa-trash-alt headerIcon'></i></a>
                                </td>
                            </tr>

                        </table>
                </div>
            </div>

        </div>
    </div>

    <span>

        <div id="deleteCourseBtnContainer" class="show">
            <input form="deleteForm" name="courseObjectId" th:value="${course._id}" hidden/>
            <input type="button" value="Delete" id="courseDeleteBtn" class="delete-button webfont" style="float:left;margin:0.5em 8% 2em 8%;">
<!--            <input type="button" class="show delete-button" id="equipDelete" value="Delete" style="margin:0em 0em 0em 10%;float:left;"></input>-->
        </div>

        <div id="submitEditBtnContainer" class="show">
            <input type="submit" id="saveEditBtn" value="Save" class="save-button webfont" style="float:right;margin:0.5em 8% 2em 8%;">
        </div>

        <div id="previousEditBtnContainer" class="show">
            <button type="button" class="show save-button" id="previousEditBtn" style="margin:0em 10% 0em 0em;float:left;">PREVIOUS</button>
        </div>

        <div id="nextEditBtnContainer" class="show">
            <button type="button" class="show save-button" id="nextEditBtn" style="margin:0em 10% 0em 0em;float:right;">NEXT</button>
        </div>

    </span>
<!--    <div style="text-align:right;">-->
<!--    </div>-->


</form>
<form id='deleteForm' th:action="@{/course/delete}" method = "post"></form>
</body>
<script src="/js/EditCourse.js"></script>
<!--<script type="text/javascript" th:src="@{/js/EditCourse.js}"></script>-->
</html>
